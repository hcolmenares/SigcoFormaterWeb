import{d as G}from"./chunk-CTFCFZ7F.js";import{a as z,b as V}from"./chunk-S6VBESQR.js";import{k as O,l as $,m as d}from"./chunk-K5NXSV7E.js";import{$a as v,Da as h,Ga as u,Ha as g,Ia as x,Ja as E,Ka as T,L,La as t,Ma as i,Na as c,Oa as w,Q as R,Ra as a,Sa as m,U as C,V as U,Xa as r,Ya as I,Za as f,_a as _,ab as b,ba as F,ca as M,ha as S,ua as p}from"./chunk-DC73RQQV.js";function Z(o,l){if(o&1&&(t(0,"option",3),r(1),i()),o&2){let e=l.$implicit;u("value",e),p(),I(e)}}var k=class o{filters=[];label="Filter";filterChange=new S;onFilterChange(l){let e=l.target.value;this.filterChange.emit(e)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=C({type:o,selectors:[["shared-filter"]],inputs:{filters:"filters",label:"label"},outputs:{filterChange:"filterChange"},standalone:!0,features:[_],decls:6,vars:1,consts:[[1,"filter-section"],["for","sampling-point-filter"],["id","sampling-point-filter",3,"change"],[3,"value"]],template:function(e,n){e&1&&(t(0,"div",0)(1,"label",1),r(2),i(),t(3,"select",2),a("change",function(y){return n.onFilterChange(y)}),E(4,Z,2,2,"option",3,x),i()()),e&2&&(p(2),f("",n.label,":"),p(2),T(n.filters))},dependencies:[d],styles:[".filter-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.filter-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.filter-section[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #ddd;border-radius:4px;background-color:#f8f9fa;cursor:pointer}"]})};var D=class o{coupon;sendCupon=new S;onShowDetails(){this.coupon&&this.sendCupon.emit(this.coupon)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=C({type:o,selectors:[["shared-cupon-card"]],inputs:{coupon:"coupon"},outputs:{sendCupon:"sendCupon"},standalone:!0,features:[_],decls:13,vars:10,consts:[[1,"coupon-card","column","g-1"],[1,"btn","btn-primary",3,"click"]],template:function(e,n){e&1&&(t(0,"div",0)(1,"h3"),r(2),i(),t(3,"p"),r(4),v(5,"date"),i(),t(6,"p"),r(7),v(8,"date"),i(),t(9,"p"),r(10),i(),t(11,"button",1),a("click",function(){return n.onShowDetails()}),r(12,"View Details"),i()()),e&2&&(p(2),I(n.coupon==null?null:n.coupon.samplingPoint),p(2),f("Fecha de instalaci\xF3n: ",b(5,4,n.coupon==null?null:n.coupon.installationDate,"dd/MM/yyyy"),""),p(3),f("Fecha de extracci\xF3n: ",b(8,7,n.coupon==null?null:n.coupon.withdrawalDate,"dd/MM/yyyy"),""),p(3),f("Tiempo de exposici\xF3n: ",n.coupon==null?null:n.coupon.exposureTime," days"))},dependencies:[d,O],styles:[".coupon-card[_ngcontent-%COMP%]{padding:1.5rem;border-radius:.8rem;background-color:#fff;box-shadow:0 2px 4px #0000001a}"]})};var N=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=U({type:o});static \u0275inj=L({imports:[d,D,k,G,V]})};function K(o,l){if(o&1){let e=w();t(0,"div",2)(1,"label"),r(2,"Velocidad de corrosi\xF3n:"),i(),c(3,"input",3),v(4,"number"),t(5,"button",4),a("click",function(){F(e);let s=m();return M(s.copyToClipboard(s.coupon.corrosionRate))}),r(6," Copiar "),i()()}if(o&2){let e=m();p(3),u("value",b(4,1,e.coupon.corrosionRate,"1.4-4"))}}var A=class o{coupon;copyToClipboard(l){navigator.clipboard.writeText(l.toString()).catch(e=>console.error("Failed to copy:",e))}isCoupons(l){return l.corrosionRate!==void 0}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=C({type:o,selectors:[["app-coupons-form"]],inputs:{coupon:"coupon"},standalone:!0,features:[_],decls:29,vars:6,consts:[[1,"coupon-form","column","g-1"],[1,"column"],[1,"input-group"],["readonly","",1,"form-input",3,"value"],[1,"btn","btn-primary",3,"click"]],template:function(e,n){e&1&&(t(0,"div",0)(1,"h3"),r(2),i(),t(3,"div",1)(4,"div",2)(5,"label"),r(6,"Serie:"),i(),c(7,"input",3),t(8,"button",4),a("click",function(){return n.copyToClipboard(n.coupon.serial)}),r(9,"Copiar"),i()(),t(10,"div",2)(11,"label"),r(12,"Peso Inicial:"),i(),c(13,"input",3),t(14,"button",4),a("click",function(){return n.copyToClipboard(n.coupon.initialMass)}),r(15," Copiar "),i()(),t(16,"div",2)(17,"label"),r(18,"Peso antes de la limpieza:"),i(),c(19,"input",3),t(20,"button",4),a("click",function(){return n.copyToClipboard(n.coupon.massBeforeCleaning)}),r(21," Copiar "),i()(),t(22,"div",2)(23,"label"),r(24,"Peso final:"),i(),c(25,"input",3),t(26,"button",4),a("click",function(){return n.copyToClipboard(n.coupon.finalMass)}),r(27," Copiar "),i()(),h(28,K,7,4,"div",2),i()()),e&2&&(p(2),f(" ",n.isCoupons(n.coupon)?"Cup\xF3n de Muestreo":"Cup\xF3n Blanco"," "),p(5),u("value",n.coupon.serial),p(6),u("value",n.coupon.initialMass),p(6),u("value",n.coupon.massBeforeCleaning),p(6),u("value",n.coupon.finalMass),p(3),g(n.isCoupons(n.coupon)?28:-1))},dependencies:[d,$]})};function Q(o,l){if(o&1&&c(0,"app-coupons-form",9),o&2){let e=m();u("coupon",e.coupon==null?null:e.coupon.blank)}}function X(o,l){if(o&1&&c(0,"app-coupons-form",9),o&2){let e=l.$implicit;u("coupon",e)}}var j=class o{coupon;closeModal=new S;onCloseDetails(){this.closeModal.emit(!1)}copyToClipboard(l){navigator.clipboard.writeText(l.toString()).catch(e=>console.error("Failed to copy:",e))}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=C({type:o,selectors:[["app-coupons-modal"]],inputs:{coupon:"coupon"},outputs:{closeModal:"closeModal"},standalone:!0,features:[_],decls:38,vars:11,consts:[[1,"modal-content","column"],[1,"modal-header","row"],[1,"btn","btn-primary",3,"click"],[1,"modal-body","column","g-1"],[1,"column","g-2"],[1,"row","g-1"],[1,"input-group","column"],[1,"row"],["readonly","",1,"form-input",3,"value"],[3,"coupon"]],template:function(e,n){e&1&&(t(0,"div",0)(1,"div",1)(2,"h2"),r(3),i(),t(4,"button",2),a("click",function(){return n.onCloseDetails()}),r(5,"\xD7"),i()(),t(6,"div",3)(7,"div",4)(8,"h3"),r(9,"Informaci\xF3n General"),i(),t(10,"div",5)(11,"div",6)(12,"label"),r(13,"Fecha de instalaci\xF3n:"),i(),t(14,"div",7),c(15,"input",8),v(16,"date"),t(17,"button",2),a("click",function(){return n.copyToClipboard(n.coupon==null?null:n.coupon.installationDate)}),r(18," Copiar "),i()()(),t(19,"div",6)(20,"label"),r(21,"Fecha de retiro:"),i(),t(22,"div",7),c(23,"input",8),v(24,"date"),t(25,"button",2),a("click",function(){return n.copyToClipboard(n.coupon==null?null:n.coupon.withdrawalDate)}),r(26," Copiar "),i()()(),t(27,"div",6)(28,"label"),r(29,"Tiempo de exposici\xF3n:"),i(),t(30,"div",7),c(31,"input",8),t(32,"button",2),a("click",function(){return n.copyToClipboard(n.coupon==null?null:n.coupon.exposureTime)}),r(33," Copiar "),i()()()()(),h(34,Q,1,1,"app-coupons-form",9),t(35,"div",5),E(36,X,1,1,"app-coupons-form",9,x),i()()()),e&2&&(p(3),f("",n.coupon==null?null:n.coupon.samplingPoint," Detalles"),p(12),u("value",b(16,5,n.coupon==null?null:n.coupon.installationDate,"dd/MM/yyyy")),p(8),u("value",b(24,8,n.coupon==null?null:n.coupon.withdrawalDate,"dd/MM/yyyy")),p(8),u("value",n.coupon==null?null:n.coupon.exposureTime),p(3),g(n.coupon!=null&&n.coupon.blank?34:-1),p(2),T(n.coupon.coupons))},dependencies:[d,O,A],styles:[".modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:1rem;gap:2rem;max-height:100vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{justify-content:space-between}"]})};function Y(o,l){if(o&1){let e=w();t(0,"shared-cupon-card",7),a("sendCupon",function(s){F(e);let y=m(3);return M(y.showDetails(s))}),i()}if(o&2){let e=l.$implicit;u("coupon",e)}}function ee(o,l){if(o&1&&(t(0,"div",5),E(1,Y,1,1,"shared-cupon-card",6,x),i()),o&2){let e=m(2);p(),T(e.filteredCoupons)}}function ne(o,l){o&1&&(t(0,"p"),r(1,"No se encontraron puntos de muestreo"),i())}function oe(o,l){if(o&1){let e=w();t(0,"shared-filter",4),a("filterChange",function(s){F(e);let y=m();return M(y.applyFilter(s))}),i(),h(1,ee,3,0,"div",5)(2,ne,2,0,"p")}if(o&2){let e=m();u("filters",e.samplingPointFilters)("label",e.label),p(),g(e.filteredCoupons.length>0?1:2)}}function te(o,l){if(o&1){let e=w();t(0,"div",3)(1,"app-coupons-modal",8),a("closeModal",function(){F(e);let s=m();return M(s.closeDetails())}),i()()}if(o&2){let e=m();p(),u("coupon",e.selectedCoupon)}}var H=class o{coupons=[];selectedCoupon=null;filteredCoupons=[];selectedFilter="All";label="Filtrar por punto de instalaci\xF3n";samplingPointFilters=["All","CUS","EPO","CUP","LBZ","COV","CAU","VAS"];excelService=R(z);onFileSelected(l){l&&this.excelService.callCoupon(l).subscribe(e=>{this.coupons=e,this.applyFilter("All")},e=>console.error("Error reading Excel file:",e))}applyFilter(l){this.selectedFilter=typeof l=="string"?l:l.target.value,this.selectedFilter==="All"?this.filteredCoupons=[...this.coupons]:this.filteredCoupons=this.coupons.filter(e=>e.samplingPoint.endsWith(this.selectedFilter))}showDetails(l){this.selectedCoupon=l}closeDetails(){this.selectedCoupon=null}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=C({type:o,selectors:[["app-coupons"]],standalone:!0,features:[_],decls:5,vars:2,consts:[[1,"coupon","column","g-1","p-2"],[1,"upload-section"],[3,"fileSelected"],[1,"modal-overlay","row"],[3,"filterChange","filters","label"],[1,"coupons-container"],[3,"coupon"],[3,"sendCupon","coupon"],[1,"modal",3,"closeModal","coupon"]],template:function(e,n){e&1&&(t(0,"section",0)(1,"div",1)(2,"shared-file",2),a("fileSelected",function(y){return n.onFileSelected(y)}),i()(),h(3,oe,3,3)(4,te,2,1,"div",3),i()),e&2&&(p(3),g(n.coupons.length>0?3:-1),p(),g(n.selectedCoupon?4:-1))},dependencies:[d,N,D,k,V,j],styles:[".coupons-container[_ngcontent-%COMP%]{display:grid;width:100%;height:42rem;overflow-y:scroll;scrollbar-width:thin;scrollbar-color:#2b2724 #d4d4d4;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1.5rem}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;z-index:1000}.modal[_ngcontent-%COMP%]{width:100%}"]})};export{H as default};

import{a as P,b as D}from"./chunk-S6VBESQR.js";import{k,l as w,m as x}from"./chunk-K5NXSV7E.js";import{$a as d,Da as v,Ga as u,Ha as y,La as o,Ma as i,Na as m,Oa as g,Q as E,Ra as l,Sa as s,U as C,X as T,Xa as r,Za as M,_a as h,ab as f,ba as _,ca as b,la as I,ua as c}from"./chunk-DC73RQQV.js";var B=class a{transform(n,t){let e=n.replace(/\s+/g,"");e=e.replace(/-/g,""),e="Bio"+e;let p=this.formatearFecha(t);return`${e}_${p}`}formatearFecha(n){let t=n.getFullYear(),e=("0"+(n.getMonth()+1)).slice(-2),p=("0"+n.getDate()).slice(-2);return`${t}${e}${p}`}static \u0275fac=function(t){return new(t||a)};static \u0275pipe=T({name:"biocuponeCode",type:a,pure:!0,standalone:!0})};function $(a,n){if(a&1){let t=g();o(0,"div",6)(1,"button",7),l("click",function(){_(t);let p=s();return b(p.anterior())}),r(2,"Anterior"),i(),o(3,"button",7),l("click",function(){_(t);let p=s();return b(p.siguiente())}),r(4,"Siguiente"),i()()}}var F=class a{biocoupons=I.required();puntoActualIndex=0;get puntoActual(){return this.biocoupons()[this.puntoActualIndex]}copyToClipboard(n){navigator.clipboard.writeText(n.toString()).catch(t=>console.error("Failed to copy:",t))}siguiente(){this.puntoActualIndex<this.biocoupons().length-1&&this.puntoActualIndex++}anterior(){this.puntoActualIndex>0&&this.puntoActualIndex--}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=C({type:a,selectors:[["biocoupon-form"]],inputs:{biocoupons:[1,"biocoupons"]},standalone:!0,features:[h],decls:47,vars:26,consts:[[1,"biocupones","column","g-1"],[1,"text-center"],[1,"column"],[1,"input-group"],["readonly","",1,"form-input",3,"value"],[1,"btn","btn-primary",3,"click"],[1,"actions","row","g-1"],[1,"btn","btn-secondary",3,"click"]],template:function(t,e){t&1&&(o(0,"div",0)(1,"h3",1),r(2),d(3,"biocuponeCode"),i(),o(4,"div",2)(5,"div",3)(6,"label"),r(7,"Fecha de instalaci\xF3n:"),i(),m(8,"input",4),d(9,"date"),o(10,"button",5),l("click",function(){return e.copyToClipboard(e.puntoActual.fechaInstalacion)}),r(11," Copiar "),i()(),o(12,"div",3)(13,"label"),r(14,"Fecha de retiro:"),i(),m(15,"input",4),d(16,"date"),o(17,"button",5),l("click",function(){return e.copyToClipboard(e.puntoActual.fechaRetiro)}),r(18," Copiar "),i()(),o(19,"div",3)(20,"label"),r(21,"D\xEDas de exposici\xF3n:"),i(),m(22,"input",4),o(23,"button",5),l("click",function(){return e.copyToClipboard(e.puntoActual.diasExposicion)}),r(24," Copiar "),i()(),o(25,"div",3)(26,"label"),r(27,"Profundidad de picado:"),i(),m(28,"input",4),d(29,"number"),o(30,"button",5),l("click",function(){return e.copyToClipboard(e.puntoActual.profundidadPicado+3)}),r(31," Copiar "),i()(),o(32,"div",3)(33,"label"),r(34,"VPM [mmy]:"),i(),m(35,"input",4),d(36,"number"),o(37,"button",5),l("click",function(){return e.copyToClipboard(e.puntoActual.vpmMmy)}),r(38," Copiar "),i()(),o(39,"div",3)(40,"label"),r(41,"VPM [mpy]:"),i(),m(42,"input",4),d(43,"number"),o(44,"button",5),l("click",function(){return e.copyToClipboard(e.puntoActual.vpmMpy)}),r(45," Copiar "),i()()()(),v(46,$,5,0,"div",6)),t&2&&(c(2),M(" ",f(3,8,e.puntoActual.puntoMuestreo,e.puntoActual.fechaRetiro)," "),c(6),u("value",f(9,11,e.puntoActual.fechaInstalacion,"dd/MM/yyyy")),c(7),u("value",f(16,14,e.puntoActual.fechaRetiro,"dd/MM/yyyy")),c(7),u("value",e.puntoActual.diasExposicion),c(6),u("value",f(29,17,e.puntoActual.profundidadPicado+3,"1.2-2")),c(7),u("value",f(36,20,e.puntoActual.vpmMmy,"1.2-2")),c(7),u("value",f(43,23,e.puntoActual.vpmMpy,"1.2-2")),c(4),y(e.biocoupons().length>1?46:-1))},dependencies:[x,w,k,B]})};function R(a,n){if(a&1){let t=g();o(0,"div",3)(1,"input",5,0),l("change",function(p){_(t);let S=s();return b(S.nuevaFilaInicial(p))}),i(),o(3,"shared-file",6),l("fileSelected",function(p){_(t);let S=s();return b(S.cargarArchivo(p))}),i()()}if(a&2){let t=s();c(),u("value",t.filaInicial)}}function j(a,n){if(a&1&&m(0,"biocoupon-form",4),a&2){let t=s();u("biocoupons",t.biocupones)}}var A=class a{biocupones=[];filaInicial=34;excelService=E(P);nuevaFilaInicial(n){let t=n.target.valueAsNumber;this.filaInicial=t}cargarArchivo(n,t=this.filaInicial){n&&this.excelService.callBiocupone(n,t).subscribe(e=>{this.biocupones=e},e=>console.error("Error reading Excel file:",e))}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=C({type:a,selectors:[["app-biocoupons"]],standalone:!0,features:[h],decls:5,vars:1,consts:[["filaInicialInput",""],[1,"biocupone","column","g-1"],[1,"text-center"],[1,"column","g-1"],[3,"biocoupons"],["type","number","placeholder","Fila inicial",3,"change","value"],[3,"fileSelected"]],template:function(t,e){t&1&&(o(0,"section",1)(1,"h1",2),r(2,"Informaci\xF3n BioCupones"),i(),v(3,R,4,1,"div",3)(4,j,1,1,"biocoupon-form",4),i()),t&2&&(c(3),y(e.biocupones.length<=0?3:4))},dependencies:[x,D,F],styles:[".biocupone[_ngcontent-%COMP%]{padding:2rem}"]})};export{A as default};
